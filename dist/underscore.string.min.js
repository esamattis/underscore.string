(function(k){var p=String.prototype.trim,r=/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,l=function(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")},m=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var b=function(){b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=b.parse(arguments[0]));return b.format.call(null,b.cache[arguments[0]],arguments)};b.format=
function(b,n){var f=1,d=b.length,e="",j=[],h,i,g,k;for(h=0;h<d;h++)if(e=a(b[h]),e==="string")j.push(b[h]);else if(e==="array"){g=b[h];if(g[2]){e=n[f];for(i=0;i<g[2].length;i++){if(!e.hasOwnProperty(g[2][i]))throw m('[_.sprintf] property "%s" does not exist',g[2][i]);e=e[g[2][i]]}}else e=g[1]?n[g[1]]:n[f++];if(/[^s]/.test(g[8])&&a(e)!="number")throw m("[_.sprintf] expecting number but found %s",a(e));switch(g[8]){case "b":e=e.toString(2);break;case "c":e=String.fromCharCode(e);break;case "d":e=parseInt(e,
10);break;case "e":e=g[7]?e.toExponential(g[7]):e.toExponential();break;case "f":e=g[7]?parseFloat(e).toFixed(g[7]):parseFloat(e);break;case "o":e=e.toString(8);break;case "s":e=(e=String(e))&&g[7]?e.substring(0,g[7]):e;break;case "u":e=Math.abs(e);break;case "x":e=e.toString(16);break;case "X":e=e.toString(16).toUpperCase()}e=/[def]/.test(g[8])&&g[3]&&e>=0?"+"+e:e;i=g[4]?g[4]=="0"?"0":g[4].charAt(1):" ";k=g[6]-String(e).length;i=g[6]?l(i,k):"";j.push(g[5]?e+i:i+e)}return j.join("")};b.cache={};b.parse=
function(a){for(var b=[],f=[],d=0;a;){if((b=/^[^\x25]+/.exec(a))!==null)f.push(b[0]);else if((b=/^\x25{2}/.exec(a))!==null)f.push("%");else if((b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))!==null){if(b[2]){d|=1;var e=[],j=b[2],h=[];if((h=/^([a-z_][a-z_\d]*)/i.exec(j))!==null)for(e.push(h[1]);(j=j.substring(h[0].length))!=="";)if((h=/^\.([a-z_][a-z_\d]*)/i.exec(j))!==null)e.push(h[1]);else if((h=/^\[(\d+)\]/.exec(j))!==null)e.push(h[1]);else throw"[_.sprintf] huh?";
else throw"[_.sprintf] huh?";b[2]=e}else d|=2;if(d===3)throw"[_.sprintf] mixing positional and named placeholders is not (yet) supported";f.push(b)}else throw"[_.sprintf] huh?";a=a.substring(b[0].length)}return f};return b}(),o=function(a){if(a)return d.escapeRegExp(a);return"\\s"},q=function(){return function(a){a="^"+(a&&a.length?"(?:"+a.join("|")+")://":"(?:(?:http|https)://|//)")+"(?:(?:[-_.!~*'()a-z\\d;:&=+$,]|%[a-f\\d]{2})*@)?(?:(?:(?:[a-z\\d](?:[-a-z\\d]*[a-z\\d])?)\\.)*(?:[a-z](?:[-a-z\\d]*[a-z\\d])?)\\.?|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\[(?:(?:[a-f\\d]{1,4}:)*(?:[a-f\\d]{1,4}|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})|(?:(?:[a-f\\d]{1,4}:)*[a-f\\d]{1,4})?::(?:(?:[a-f\\d]{1,4}:)*(?:[a-f\\d]{1,4}|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}))?)\\])(?:\\:\\d+)?(?:/(?:[-_.!~*'()a-z\\d:@&=+$,]|%[a-f\\d]{2})*(?:;(?:[-_.!~*'()a-z\\d:@&=+$,]|%[a-f\\d]{2})*)*(?:/(?:[-_.!~*'()a-z\\d:@&=+$,]|%[a-f\\d]{2})*(?:;(?:[-_.!~*'()a-z\\d:@&=+$,]|%[a-f\\d]{2})*)*)*)?(?:\\?(?:[-_.!~*'()a-z\\d;/?:@&=+$,\\[\\]]|%[a-f\\d]{2})*)?(?:#(?:[-_.!~*'()a-z\\d;/?:@&=+$,\\[\\]]|%[a-f\\d]{2})*)?$";
return RegExp(a,"i")}}(),s=q(),d={isURL:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();return(a.length?q(a):s).test(b)},isBlank:function(a){return a==!1},isEmail:function(a){return r.test(a)},stripTags:function(a){return a.replace(/<\/?[^>]+>/ig,"")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},chop:function(a,b){b=b||a.length;for(var c=[],d=0;d<a.length;)c.push(a.slice(d,d+b)),d+=b;return c},clean:function(a){return d.strip(a.replace(/\s+/g,
" "))},count:function(a,b){for(var c=0,d,f=0;f<a.length;)d=a.indexOf(b,f),d>=0&&c++,f=f+(d>=0?d:0)+b.length;return c},chars:function(a){return a.split("")},escapeHTML:function(a){return String(a||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},unescapeHTML:function(a){return String(a||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")},escapeRegExp:function(a){return String(a||
"").replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(a,b,c){a=a.split("");a.splice(b,0,c);return a.join("")},includes:function(a,b){return a.indexOf(b)!==-1},join:function(){var a=Array.prototype.slice.call(arguments);return a.join(a.shift())},lines:function(a){return a.split("\n")},reverse:function(a){return Array.prototype.reverse.apply(a.split("")).join("")},splice:function(a,b,c,d){a=a.split("");a.splice(b,c,d);return a.join("")},startsWith:function(a,b){return a.length>=b.length&&
a.substring(0,b.length)===b},endsWith:function(a,b){return a.length>=b.length&&a.substring(a.length-b.length)===b},succ:function(a){var b=a.split("");b.splice(a.length-1,1,String.fromCharCode(a.charCodeAt(a.length-1)+1));return b.join("")},titleize:function(a){a=a.split(" ");for(var b,c=0;c<a.length;c++)b=a[c].split(""),typeof b[0]!=="undefined"&&(b[0]=b[0].toUpperCase()),c+1===a.length?a[c]=b.join(""):a[c]=b.join("")+" ";return a.join("")},camelize:function(a){return d.trim(a).replace(/(\-|_|\s)+(.)?/g,
function(a,c,d){return d?d.toUpperCase():""})},underscored:function(a){return d.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()},dasherize:function(a){return d.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1-$2").replace(/^([A-Z]+)/,"-$1").replace(/\_|\s+/g,"-").toLowerCase()},trim:function(a,b){if(!b&&p)return p.call(a);b=o(b);return a.replace(RegExp("^["+b+"]+|["+b+"]+$","g"),"")},ltrim:function(a,b){b=o(b);return a.replace(RegExp("^["+b+"]+","g"),"")},rtrim:function(a,
b){b=o(b);return a.replace(RegExp("["+b+"]+$","g"),"")},truncate:function(a,b,c){return a.length>b?a.slice(0,b)+(c||"..."):a},words:function(a,b){return a.split(b||" ")},pad:function(a,b,c,d){var f="";f=0;c?c.length>1&&(c=c.charAt(0)):c=" ";switch(d){case "right":f=b-a.length;f=l(c,f);a+=f;break;case "both":f=b-a.length;f={left:l(c,Math.ceil(f/2)),right:l(c,Math.floor(f/2))};a=f.left+a+f.right;break;default:f=b-a.length,f=l(c,f),a=f+a}return a},lpad:function(a,b,c){return d.pad(a,b,c)},rpad:function(a,
b,c){return d.pad(a,b,c,"right")},lrpad:function(a,b,c){return d.pad(a,b,c,"both")},sprintf:m,vsprintf:function(a,b){b.unshift(a);return m.apply(null,b)},toNumber:function(a,b){return(a*1||0).toFixed(b*1||0)*1||0},strRight:function(a,b){var c=!b?-1:a.indexOf(b);return c!=-1?a.slice(c+b.length,a.length):a},strRightBack:function(a,b){var c=!b?-1:a.lastIndexOf(b);return c!=-1?a.slice(c+b.length,a.length):a},strLeft:function(a,b){var c=!b?-1:a.indexOf(b);return c!=-1?a.slice(0,c):a},strLeftBack:function(a,
b){var c=a.lastIndexOf(b);return c!=-1?a.slice(0,c):a}};d.isUrl=d.isURL;d.strip=d.trim;d.lstrip=d.ltrim;d.rstrip=d.rtrim;d.center=d.lrpad;d.ljust=d.lpad;d.rjust=d.rpad;typeof window==="undefined"&&typeof module!=="undefined"?module.exports=d:typeof k._!=="undefined"?k._.mixin(d):k._=d})(this||window);
